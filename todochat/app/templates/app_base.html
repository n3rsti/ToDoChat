{% load templatetags %}
{% load static %}
    <header class="header">
        <h2 class="task__bar">Tasks: <span class="li__span">1</span></h2>
        <button class="header__button" type="button" aria-label="Open navigation" aria-expanded="false"
            aria-controls="side-nav" tabindex="0">
            <hr class="button__hr">
            <hr class="button__hr">
            <hr class="button__hr">
        </button>
    </header>
    
    <nav class="side__nav" name="side-nav">
        <div class="hello__div">
            <a href="{% url 'profile' %}">
                <img src="{{ user.profile.image.url }}" alt="{{ user.username }} profile picture" class="profile__photo">
            </a>
            
            <h2 class="hello">

                {{ user.username }}
            </h2>
        </div>
        <section class="nav__groups">
            <h2 class="groups__h2">Groups</h2>
            <ul class="groups__ul">
                {% for server in user.server_set.all|get_first_num:5 %}
                <li>
                    <a href="{% url 'server_detail' server.id %}" class="groups__li">{{ server.name }}<span class="li__span">8</span></a>
                </li>
                {% endfor %}
                
            </ul>
            {% if user.server_set.all.count > 5 %}
                <a href="" class="load_more">Load more</a>
            {% endif %}
            {% if user.friends_set.count > 0 or user.profile.friends.count > 0 %}
                <h2 class="groups__h2 margin-top">Friends</h2>
                <ul class="groups__ul friends__ul">
                    {% for friend in user.friends_set.all %}
                    <li class="flex">
                        <img src="{{ friend.image.url }}" alt="{{ friend.user.username }} profile picture" class="users__img {% if friend.is_online %}online{% else %}offline{% endif %}">
                        <a href="{% url 'user_detail' friend.user.username %}" class="groups__li">{{ friend.user.username }}</a>
                    </li>
                
                    {% endfor %}
                    {% for friend in user.profile.friends.all %}
                    <li class="flex">
                        <img src="{{ friend.profile.image.url }}" alt="{{ friend.username }} profile picture" class="users__img {% if friend.profile.is_online %}online{% else %}offline{% endif %}">
                        <a href="{% url 'user_detail' friend.username %}" class="groups__li">{{ friend.username }}</a>
                    </li>
                
                    {% endfor %}
                </ul>
            {% endif %}
            <div class="add__li">
                <a href="{% url 'create_server' %}" class="create_server__button">
                    Add group
                    <span class="li__span li__plus">
                        <i class="fas fa-plus"></i>
                    </span>
                </a>
            </div>
            <ul class="groups__ul">
                {% for group in groups %}
                <li class="groups__li">{{ group }}</li>
                {% endfor %}
            </ul>
        </section>
        <div class="bottom__side">
            <a href="{% url 'logout' %}" class="bottom__button bottom__button-logout"
                tabindex="-1">
                <i class="fas fa-sign-out-alt"></i>
            </a>
            <a href="{% url 'index' %}" class="bottom__button bottom__button-home"
                tabindex="-1">
                <i class="fas fa-home"></i>
            </a>
            <button class="bottom__button bottom__button-settings">
                <i class="fas fa-cog"></i>
            </button>



        </div>

    </nav>
        
        <div class="alerts">
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }}">
                    {{ message }}
                </div>
            {% endfor %}
        </div>
    

<script src="{% static 'js/app.js' %}"></script>